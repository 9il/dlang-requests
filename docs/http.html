<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>requests.http</title>
    <style type="text/css">
      body {
        background-color: #6080a0;
        color: #ffffff;
      }
      h1 {
        text-align: center;
        font-size: 1.5em;
        font-weight: bold;
      }
      h2 {
        text-align: center;
        font-size: 1.4em;
        font-weight: bold;
      }
      p {
        text-align: justify;
      }
      .main {
        margin-left: auto;
        margin-right: auto;
        padding: .5ex 1ex .5ex 1ex;
        background-color: #e0e0e0;
        color: #000000;
        display: table;
      }
      .sections {
        margin-top: 0;
        padding-left: 2em;
      }
      .main > .sections {
        /* This is the header section for the whole module */
        margin-left: auto;
        margin-right: auto;
        margin-top: 0;
        padding: 1ex 1em 1ex 1em;
        background-color: #f0f0f0;
	color: #000000;
      }
      .decl, .desc {
        padding: .5ex 1ex .5ex 1ex;
        margin: 1ex 0 1ex 0;
      }
      .sections, dt.decl > p {
	/* We wrap dt.decl in a <p> so that the <dt> is allowed to expand to
	the width of the <dd>, otherwise the background will be truncated. Yes
	this is ugly but CSS is a bit crippled. */
        max-width: 45em;
      }
      dt.decl, dt.decl > p {
        margin-top: 0;
        margin-bottom: 0;
        text-align: left;
        font-size: 1.5em;
        font-weight: bold;
      }
      dd.decl {
        margin-top: 0;
      }
      .sections p:first-child, h4.sec + p {
        margin-top: 0;
      }
      .decl {
        background-color: #f0f0f0;
        color: #000000;
      }
      .decl .decl {
        background-color: #f8f8f8;
	color: #000000;
      }
      .decl .decl .decl {
        background-color: #ffffff;
        color: #000000;
      }
      dd dl {
        margin-left: 2em;
      }
      h3.memb {
        text-align: left;
        padding-left: 2em;
        font-size: 1em;
        font-weight: bold;
      }
      pre.d_code {
        padding: .5ex 1ex .5ex 1ex;
        border: 1px dotted black;
        background-color: #ffffc0;
	color: #000000;
      }
      h4.sec {
        margin-top: 0;
        margin-bottom: 0;
        text-align: left;
        font-size: 1em;
        font-weight: bold;
      }
      dl.params {
        margin-top: 0;
      }
      .paramname {
        margin-top: 0;
        margin-bottom: 0;
        padding-right: 1em;
        vertical-align: top;
        font-size: 1.1em;
        white-space: nowrap;
      }
    </style>
    
  </head>
  <body>
  
  <div class="main">
    
    <h1>Module: requests.http</h1>
    </p><p>
<div class="modmemb">
    <h2>Details</h2>
    <dl><dt class="decl"><p><code><a name="BasicAuthentication"></a>class <u>BasicAuthentication</u>: <u>requests.http.Auth</u>;
</code></p></dt>
<dd class="decl desc"><div class="sections"><p>Basic authentication.
 Adds <b>Authorization: Basic</b> header to request.</p>
</div>
<h3 class="memb">Members:</h3>
  <dl><dt class="decl"><p><code><a name="BasicAuthentication.this"></a>this(string <code><i>username</i></code>, string <code><i>password</i></code>, string[] <code><i>domains</i></code> = []);
</code></p></dt>
<dd class="decl desc"><div class="sections"><p>Constructor.
</p>
<h4 class="sec">Parameters:</h4>
  <table class="params"><tr><td class="paramname"><code>string <code><i>username</i></code></code></td>
<td class="paramdesc"><p><code><i>username</i></code></p></td></tr>
<tr><td class="paramname"><code>string <code><i>password</i></code></code></td>
<td class="paramdesc"><p><code><i>password</i></code></p></td></tr>
<tr><td class="paramname"><code>string[] <code><i>domains</i></code></code></td>
<td class="paramdesc"><p>not used now</p></td></tr>
</table>
</div>
</dd>
</dl>
</dd>
<dt class="decl"><p><code><a name="queryParams"></a>pure nothrow @safe auto <u>queryParams</u>(T...)(T <code><i>params</i></code>);
</code></p></dt>
<dd class="decl desc"></p><p>
</dd>
<dt class="decl"><p><code><a name="HTTPResponse"></a>class <u>HTTPResponse</u>: <u>requests.base.Response</u>;
</code></p></dt>
<dd class="decl desc"><div class="sections"><p>Response - result of request execution.
</p>
<p>Response.code - response HTTP code.
</p><p>

Response.status_line - received HTTP status line.
</p><p>

Response.responseHeaders - received headers.
</p><p>

Response.responseBody - container for received body
</p><p>

Response.history - for redirected responses contain all history</p>
</div>
</dd>
<dt class="decl"><p><code><a name="PostFile"></a>struct <u>PostFile</u>;
</code></p></dt>
<dd class="decl desc"><div class="sections"><p>Struct to send multiple files in POST request.</p>
</div>
<h3 class="memb">Members:</h3>
  <dl><dt class="decl"><p><code><a name="PostFile.fileName"></a>string <u>fileName</u>;
</code></p></dt>
<dd class="decl desc"><div class="sections"><p>Path to the file to send.</p>
</div>
</dd>
<dt class="decl"><p><code><a name="PostFile.fieldName"></a>string <u>fieldName</u>;
</code></p></dt>
<dd class="decl desc"><div class="sections"><p>Name of the field (if empty - send file base name)</p>
</div>
</dd>
<dt class="decl"><p><code><a name="PostFile.contentType"></a>string <u>contentType</u>;
</code></p></dt>
<dd class="decl desc"><div class="sections"><p><u>contentType</u> of the file if not empty</p>
</div>
</dd>
</dl>
</dd>
<dt class="decl"><p><code><a name="FiniteReadable"></a>interface <u>FiniteReadable</u>;
</code></p></dt>
<dd class="decl desc"><div class="sections"><p>This is File-like interface for sending data to multipart fotms
</p>
</div>
<h3 class="memb">Members:</h3>
  <dl><dt class="decl"><p><code><a name="FiniteReadable.getSize"></a>abstract ulong <u>getSize</u>();
</code></p></dt>
<dd class="decl desc"><div class="sections"><p>size of the content</p>
</div>
</dd>
<dt class="decl"><p><code><a name="FiniteReadable.read"></a>abstract ubyte[] <u>read</u>();
</code></p></dt>
<dd class="decl desc"><div class="sections"><p>file-like <u>read</u>()</p>
</div>
</dd>
</dl>
</dd>
<dt class="decl"><p><code><a name="formData"></a>auto <u>formData</u>(string <code><i>name</i></code>, File <code><i>f</i></code>, string[string] <code><i>parameters</i></code> = null);
</code></p></dt>
<dd class="decl desc"><div class="sections"><p>Helper to create form elements from File.
</p>
<h4 class="sec">Parameters:</h4>
  <table class="params"><tr><td class="paramname"><code>string <code><i>name</i></code></code></td>
<td class="paramdesc"><p><code><i>name</i></code> of the field in form</p></td></tr>
<tr><td class="paramname"><code>File <code><i>f</i></code></code></td>
<td class="paramdesc"><p>opened std.stio.File to send to server</p></td></tr>
<tr><td class="paramname"><code>string[string] <code><i>parameters</i></code></code></td>
<td class="paramdesc"><p>optional <code><i>parameters</i></code> (most important are "filename" and "Content-Type")</p></td></tr>
</table>
</div>
</dd>
<dt class="decl"><p><code><a name="formData"></a>auto <u>formData</u>(string <code><i>name</i></code>, ubyte[] <code><i>b</i></code>, string[string] <code><i>parameters</i></code> = null);
</code></p></dt>
<dd class="decl desc"><div class="sections"><p>Helper to create form elements from ubyte[].
</p>
<h4 class="sec">Parameters:</h4>
  <table class="params"><tr><td class="paramname"><code>string <code><i>name</i></code></code></td>
<td class="paramdesc"><p><code><i>name</i></code> of the field in form</p></td></tr>
<tr><td class="paramname"><code>ubyte[] <code><i>b</i></code></code></td>
<td class="paramdesc"><p>data to send to server</p></td></tr>
<tr><td class="paramname"><code>string[string] <code><i>parameters</i></code></code></td>
<td class="paramdesc"><p>optional <code><i>parameters</i></code> (can be "filename" and "Content-Type")</p></td></tr>
</table>
</div>
</dd>
<dt class="decl"><p><code><a name="MultipartForm"></a>struct <u>MultipartForm</u>;
</code></p></dt>
<dd class="decl desc"><div class="sections"><p>This struct used to bulld POST's to forms.
</p>
<p>Each part have name and data. data is something that can be read-ed and have size.
</p><p>

For example this can be string-like object (wrapped for reading) or opened File.</p>
</div>
</dd>
<dt class="decl"><p><code><a name="HTTPRequest"></a>struct <u>HTTPRequest</u>;
</code></p></dt>
<dd class="decl desc"><div class="sections"><p>Request.
</p>
<p>Configurable parameters:
</p><p>

<b>method</b> - string, method to use (GET, POST, ...)
</p><p>

<b>headers</b> - string[string], add any additional headers you'd like to send.
</p><p>

<b>authenticator</b> - class Auth, class to send auth headers.
</p><p>

<b>keepAlive</b> - bool, set <b>true</b> for keepAlive requests. default <b>true</b>.
</p><p>

<b>maxRedirects</b> - uint, maximum number of redirects. default 10.
</p><p>

<b>maxHeadersLength</b> - size_t, maximum length of server response headers. default = 32KB.
</p><p>

<b>maxContentLength</b> - size_t, maximun content length. delault - 0 = unlimited.
</p><p>

<b>bufferSize</b> - size_t, send and receive buffer size. default = 16KB.
</p><p>

<b>verbosity</b> - uint, level of verbosity(0 - nothing, 1 - headers, 2 - headers and body progress). default = 0.
</p><p>

<b>proxy</b> - string, set proxy url if needed. default - <b>null</b>.
</p><p>

<b>cookie</b> - Tuple Cookie, Read/Write cookie You can get cookie setted by server, or set cookies before doing request.
</p><p>

<b>timeout</b> - Duration, Set timeout value for connect/receive/send.</p>
</div>
<h3 class="memb">Members:</h3>
  <dl><dt class="decl"><p><code><a name="HTTPRequest.addHeaders"></a>void <u>addHeaders</u>(in string[string] <code><i>headers</i></code>);
</code></p></dt>
<dd class="decl desc"><div class="sections"><p>Add <code><i>headers</i></code> to request
</p>
<h4 class="sec">Parameters:</h4>
  <table class="params"><tr><td class="paramname"><code>string[string] <code><i>headers</i></code></code></td>
<td class="paramdesc"><p><code><i>headers</i></code> to send.</p></td></tr>
</table>
</div>
</dd>
<dt class="decl"><p><code><a name="HTTPRequest.removeHeaders"></a>pure void <u>removeHeaders</u>(in string[] <code><i>headers</i></code>);
</code></p></dt>
<dd class="decl desc"><div class="sections"><p>Remove <code><i>headers</i></code> from request
</p>
<h4 class="sec">Parameters:</h4>
  <table class="params"><tr><td class="paramname"><code>string[] <code><i>headers</i></code></code></td>
<td class="paramdesc"><p><code><i>headers</i></code> to remove.</p></td></tr>
</table>
</div>
</dd>
<dt class="decl"><p><code><a name="HTTPRequest.exec"></a>HTTPResponse <u>exec</u>(string method = "POST")(string <code><i>url</i></code>, MultipartForm <code><i>sources</i></code>);
</code></p></dt>
<dd class="decl desc"><div class="sections"><p>Send multipart for request.
</p>
<p>You would like to use this method for sending large portions of mixed data or uploading files to forms.
</p><p>

Content of the posted form consist of <code><i>sources</i></code>. Each source have at least name and value (can be string-like object or opened file, see more docs for MultipartForm struct)

</p>
<h4 class="sec">Parameters:</h4>
  <table class="params"><tr><td class="paramname"><code>string <code><i>url</i></code></code></td>
<td class="paramdesc"><p><code><i>url</i></code></p></td></tr>
<tr><td class="paramname"><code>MultipartForm <code><i>sources</i></code></code></td>
<td class="paramdesc"><p>array of <code><i>sources</i></code>.</p></td></tr>
</table>
</div>
</dd>
<dt class="decl"><p><code><a name="HTTPRequest.exec.2"></a>HTTPResponse <u>exec</u>(string method = "POST", R)(string <code><i>url</i></code>, R <code><i>content</i></code>, string <code><i>contentType</i></code> = "application/octet-stream") if (rank!R == 1 || rank!R == 2 &amp;&amp; isSomeChar!(Unqual!(typeof(<code><i>content</i></code>.front.front))) || rank!R == 2 &amp;&amp; is(Unqual!(typeof(<code><i>content</i></code>.front.front)) == ubyte));
</code></p></dt>
<dd class="decl desc"><div class="sections"><p>POST/PUT/... data from some string(with Content-Length), or from range of strings/bytes (use Transfer-Encoding: chunked).
</p>
<p>When rank 1 (flat array) used as <code><i>content</i></code> it must have length. In that case "<code><i>content</i></code>" will be sent directly to network, and Content-Length headers will be added.
</p><p>

If you are goung to send some range and do not know length at the moment when you start to send request, then you can send chunks of chars or ubyte.
</p><p>

Try not to send too short chunks as this will put additional load on client and server. Chunks of length 2048 or 4096 are ok.
</p><p>

</p><p>


</p>
<p><h4 class="sec">Parameters:</h4>
<code><i>url</i></code> = <code><i>url</i></code>
</p><p>

<code><i>content</i></code> = string or input range
</p><p>

<code><i>contentType</i></code> = <code><i>content</i></code> type

</p>
<h4 class="sec">Returns:</h4> <p>Response

</p>
<h4 class="sec">Examples:</h4> <p><pre class="d_code">
rs = rq.<u>exec</u>!<span style="color:red">"POST"</span>(<span style="color:red">"http://httpbin.org/post"</span>, <span style="color:red">"привiт, свiт!"</span>, <span style="color:red">"application/octet-stream"</span>);



<span style="color:blue">auto</span> s = lineSplitter(<span style="color:red">"one,\ntwo,\nthree."</span>);

rs = rq.<u>exec</u>!<span style="color:red">"POST"</span>(<span style="color:red">"http://httpbin.org/post"</span>, s, <span style="color:red">"application/octet-stream"</span>);



<span style="color:blue">auto</span> s = <span style="color:red">"ABCDEFGHIJKLMNOPQRSTUVWXYZ"</span>;

rs = rq.<u>exec</u>!<span style="color:red">"POST"</span>(<span style="color:red">"http://httpbin.org/post"</span>, s.representation.chunks(10), <span style="color:red">"application/octet-stream"</span>);



<span style="color:blue">auto</span> f = File(<span style="color:red">"tests/test.txt"</span>, <span style="color:red">"rb"</span>);

rs = rq.<u>exec</u>!<span style="color:red">"POST"</span>(<span style="color:red">"http://httpbin.org/post"</span>, f.byChunk(3), <span style="color:red">"application/octet-stream"</span>);

</pre>
</p>
</div>
</dd>
<dt class="decl"><p><code><a name="HTTPRequest.exec.3"></a>HTTPResponse <u>exec</u>(string method = "GET")(string <code><i>url</i></code> = null, QueryParam[] <code><i>params</i></code> = null);
</code></p></dt>
<dd class="decl desc"><div class="sections"><p>Send request with pameters.
</p>
<p>If used for POST or PUT requests then application/x-www-form-urlencoded used.
</p><p>

Request parameters will be encoded into request string or placed in request body for POST/PUT
</p><p>

requests.

</p>
<p><h4 class="sec">Parameters:</h4>
<code><i>url</i></code> = <code><i>url</i></code>
</p><p>

<code><i>params</i></code> = request parameters

</p>
<h4 class="sec">Returns:</h4> <p>Response

</p>
<h4 class="sec">Examples:</h4> <p><pre class="d_code">
rs = Request().<u>exec</u>!<span style="color:red">"GET"</span>(<span style="color:red">"http://httpbin.org/get"</span>, [<span style="color:red">"c"</span>:<span style="color:red">"d"</span>, <span style="color:red">"a"</span>:<span style="color:red">"b"</span>]);

</pre>
</p>
</div>
</dd>
<dt class="decl"><p><code><a name="HTTPRequest.exec.4"></a>HTTPResponse <u>exec</u>(string method = "POST")(string <code><i>url</i></code>, PostFile[] <code><i>files</i></code>) if (method == "POST");
</code></p></dt>
<dd class="decl desc"><div class="sections"><p>WRAPPERS
</p>
<p>send file(s) using POST and multipart form.
</p><p>

This wrapper will be deprecated, use post with MultipartForm - it is more general and clear.

</p>
<p><h4 class="sec">Parameters:</h4>
<code><i>url</i></code> = <code><i>url</i></code>
</p><p>

<code><i>files</i></code> = array of PostFile structures

</p>
<h4 class="sec">Returns:</h4> <p>Response
</p><p>

Each PostFile structure contain path to file, and optional field name and content type.
</p><p>

If no field name provided, then basename of the file will be used.
</p><p>

application/octet-stream is default when no content type provided.

</p>
<p><h4 class="sec">Example:</h4>
<pre class="d_code">
PostFile[] <i>files</i> = [

{fileName:<span style="color:red">"tests/abc.txt"</span>, fieldName:<span style="color:red">"abc"</span>, contentType:<span style="color:red">"application/octet-stream"</span>},

{fileName:<span style="color:red">"tests/test.txt"</span>}

];

rs = rq.<u>exec</u>!<span style="color:red">"POST"</span>(<span style="color:red">"http://httpbin.org/post"</span>, <i>files</i>);

</pre>
</p>
</div>
</dd>
<dt class="decl"><p><code><a name="HTTPRequest.exec.5"></a>HTTPResponse <u>exec</u>(string method = "GET")(string <code><i>url</i></code>, string[string] <code><i>params</i></code>);
</code></p></dt>
<dd class="decl desc"><div class="sections"><p><u>exec</u> request with parameters when you can use dictionary (when you have no duplicates in parameter names)
</p>
<p>Consider switch to <u>exec</u>(<code><i>url</i></code>, QueryParams) as it more generic and clear.

</p>
<p><h4 class="sec">Parameters:</h4>
<code><i>url</i></code> = <code><i>url</i></code>
</p><p>

<code><i>params</i></code> = dictionary with field names as keys and field values as values.

</p>
<h4 class="sec">Returns:</h4> <p>Response</p>
</div>
</dd>
<dt class="decl"><p><code><a name="HTTPRequest.get"></a>HTTPResponse <u>get</u>(A...)(A <code><i>args</i></code>);
</code></p></dt>
<dd class="decl desc"><div class="sections"><p>GET request. Simple wrapper over exec!"GET"
</p>
<h4 class="sec">Parameters:</h4>
  <table class="params"><tr><td class="paramname"><code>A <code><i>args</i></code></code></td>
<td class="paramdesc"><p>request parameters. see exec docs.</p></td></tr>
</table>
</div>
</dd>
<dt class="decl"><p><code><a name="HTTPRequest.post"></a>HTTPResponse <u>post</u>(A...)(string <code><i>uri</i></code>, A <code><i>args</i></code>);
</code></p></dt>
<dd class="decl desc"><div class="sections"><p>POST request. Simple wrapper over exec!"POST"
</p>
<h4 class="sec">Parameters:</h4>
  <table class="params"><tr><td class="paramname"><code>string <code><i>uri</i></code></code></td>
<td class="paramdesc"><p>endpoint <code><i>uri</i></code></p></td></tr>
<tr><td class="paramname"><code>A <code><i>args</i></code></code></td>
<td class="paramdesc"><p>request parameters. see exec docs.</p></td></tr>
</table>
</div>
</dd>
</dl>
</dd>
</dl>
  </div>

  </div>
  
  </body>
</html>
